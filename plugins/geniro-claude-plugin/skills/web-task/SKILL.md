---
name: web-task
description: "Execute a frontend task in the Geniro Web app (React + Vite + Ant Design + Refine). Use for creating components, pages, hooks, services, WebSocket handlers, graph canvas features, or fixing frontend bugs."
context: fork
agent: web-agent
allowed-tools:
  - Read
  - Write
  - Edit
  - Bash
  - Glob
  - Grep
  - Task
argument-hint: "[task description]"
---

# Web Task

Execute the following task in the **geniro-web/** repository:

$ARGUMENTS

## Before Starting

1. Read `geniro-web/claude.md` for full project context and architecture.
2. Search for related components and hooks using Glob/Grep to follow existing patterns.
3. Check `src/autogenerated/` for available API types.

## After Completing

### Step 1: Run full-check
```bash
cd geniro-web && pnpm run full-check
```
Fix any issues and re-run until it passes.

### Step 2: Visual verification with Playwright (MANDATORY)
1. Check if the dev server is already running on port 5174 (`lsof -i :5174`). **NEVER start a second instance.** Only start it if nothing is listening: `cd geniro-web && pnpm dev &`
2. Navigate to affected pages using Playwright MCP navigate
3. Take screenshots with Playwright MCP screenshot and verify layout
4. Test interactions (clicks, forms, modals) with Playwright tools
5. If auth is required, attempt Keycloak login. If auth is unavailable, document this but still verify non-auth-gated pages.
6. **The task is NOT done until visual verification is complete** (or explicitly skipped with justification after attempting auth).

### Step 3: Archive completed feature (if from backlog)

If `$ARGUMENTS` references a feature from `.claude/project-features/` (e.g., starts with `feature:` followed by a name), archive it after successful completion:

1. Find the feature file: `.claude/project-features/<name>.md`
2. Update YAML frontmatter: set `status: completed` and `updated: <today's date>` using the Edit tool
3. Move to completed:
   ```bash
   mkdir -p .claude/project-features/completed
   mv .claude/project-features/<name>.md .claude/project-features/completed/<name>.md
   ```

Skip this step if the task is not from the feature backlog (ad-hoc description).

### Report back with:
- Files created/modified
- Key decisions made
- `full-check` result (pass/fail)
- **Visual verification result** — pages visited, screenshots reviewed, issues found/fixed (or why skipped)
- Whether API client regeneration is needed (`pnpm generate:api`)
- Feature archived (yes/no — which feature was moved to completed/)
- Any issues or follow-ups
